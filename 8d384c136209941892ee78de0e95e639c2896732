{
  "comments": [
    {
      "key": {
        "uuid": "cdf3da99_d9a8ded1",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 281,
      "author": {
        "id": 5050
      },
      "writtenOn": "2019-03-26T14:46:56Z",
      "side": 1,
      "message": "DrawBase::bytesPerIndex(executionState)?",
      "range": {
        "startLine": 281,
        "startChar": 13,
        "endLine": 281,
        "endChar": 71
      },
      "revId": "8d384c136209941892ee78de0e95e639c2896732",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0178a35d_4e903e8e",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 281,
      "author": {
        "id": 6982
      },
      "writtenOn": "2019-03-26T22:11:38Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "cdf3da99_d9a8ded1",
      "range": {
        "startLine": 281,
        "startChar": 13,
        "endLine": 281,
        "endChar": 71
      },
      "revId": "8d384c136209941892ee78de0e95e639c2896732",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1d5b77ab_7465d101",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 284,
      "author": {
        "id": 5050
      },
      "writtenOn": "2019-03-26T14:46:56Z",
      "side": 1,
      "message": "DrawBase::appendIndexType(executionState, \u0026drawType) or DrawBase::getDrawType(executionState, drawType)?",
      "range": {
        "startLine": 283,
        "startChar": 14,
        "endLine": 284,
        "endChar": 91
      },
      "revId": "8d384c136209941892ee78de0e95e639c2896732",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b40c0b6d_43095934",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 284,
      "author": {
        "id": 6982
      },
      "writtenOn": "2019-03-26T22:11:38Z",
      "side": 1,
      "message": "I want to kill this completely.",
      "parentUuid": "1d5b77ab_7465d101",
      "range": {
        "startLine": 283,
        "startChar": 14,
        "endLine": 284,
        "endChar": 91
      },
      "revId": "8d384c136209941892ee78de0e95e639c2896732",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a845a03_6ae6a9a8",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 343,
      "author": {
        "id": 5050
      },
      "writtenOn": "2019-03-26T14:46:56Z",
      "side": 1,
      "message": "Same members as indexed version, so maybe add: \", bool isIndexed)\" ? Your call.",
      "range": {
        "startLine": 343,
        "startChar": 87,
        "endLine": 343,
        "endChar": 88
      },
      "revId": "8d384c136209941892ee78de0e95e639c2896732",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0da54d74_eb1c52b7",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 343,
      "author": {
        "id": 6982
      },
      "writtenOn": "2019-03-27T20:00:29Z",
      "side": 1,
      "message": "I don\u0027t have a strong argument, but I\u0027m not fond of mashing together multiple Vulkan command types. It makes looking at the command buffer contents more confusing.",
      "parentUuid": "3a845a03_6ae6a9a8",
      "range": {
        "startLine": 343,
        "startChar": 87,
        "endLine": 343,
        "endChar": 88
      },
      "revId": "8d384c136209941892ee78de0e95e639c2896732",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b36fa27_82fc03e8",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 343,
      "author": {
        "id": 5050
      },
      "writtenOn": "2019-03-28T14:29:50Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "0da54d74_eb1c52b7",
      "range": {
        "startLine": 343,
        "startChar": 87,
        "endLine": 343,
        "endChar": 88
      },
      "revId": "8d384c136209941892ee78de0e95e639c2896732",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "279f9764_aaf8a14b",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 352,
      "author": {
        "id": 5050
      },
      "writtenOn": "2019-03-26T14:46:56Z",
      "side": 1,
      "message": "getDrawIndirectCommand(drawId)?",
      "range": {
        "startLine": 352,
        "startChar": 14,
        "endLine": 352,
        "endChar": 119
      },
      "revId": "8d384c136209941892ee78de0e95e639c2896732",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2007c74a_b534a915",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 352,
      "author": {
        "id": 6982
      },
      "writtenOn": "2019-03-27T20:00:29Z",
      "side": 1,
      "message": "I suppose, but we\u0027re already doing almost nothing in this function...",
      "parentUuid": "279f9764_aaf8a14b",
      "range": {
        "startLine": 352,
        "startChar": 14,
        "endLine": 352,
        "endChar": 119
      },
      "revId": "8d384c136209941892ee78de0e95e639c2896732",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02430441_af3e03ba",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 352,
      "author": {
        "id": 5050
      },
      "writtenOn": "2019-03-28T14:29:50Z",
      "side": 1,
      "message": "It might be too involved, but I was thinking of something like:\n\ntemplate \u003cstruct T\u003e\nstruct DrawIndexedBase : public DrawBase\n{\n  DrawIndexedBase(VkBuffer buffer, VkDeviceSize offset, uint32_t drawCount, uint32_t stride)\n    : buffer(buffer), offset(offset), drawCount(drawCount), stride(stride)\n  {\n  }\n\n  inline T* getDrawCommand(uint32_t drawId) const\n  {\n    return reinterpret_cast\u003cT*\u003e(Cast(buffer)-\u003egetOffsetPointer(offset + drawId * stride));\n  }\n\n  void play(CommandBuffer::ExecutionState\u0026 executionState) override\n  {\n    for (auto drawId \u003d 0u; drawId \u003c drawCount; drawId++)\n    {\n      draw(executionState, getDrawCommand(drawId));\n    }\n  }\n\n  VkBuffer buffer;\n  VkDeviceSize offset;\n  uint32_t drawCount;\n  uint32_t stride;\n};\n\nstruct DrawIndirect : public DrawIndexedBase\u003cVkDrawIndirectCommand\u003e\n{\n...\n  inline void draw(CommandBuffer::ExecutionState\u0026 executionState, const VkDrawIndirectCommand* cmd)\n  {\n    draw(executionState, false, cmd-\u003evertexCount, cmd-\u003einstanceCount, 0, cmd-\u003efirstVertex, cmd-\u003efirstInstance);\n  }\n}\n\nstruct DrawIndexedIndirect : public DrawIndexedBase\u003cVkDrawIndexedIndirectCommand\u003e\n{\n...\n  inline void draw(CommandBuffer::ExecutionState\u0026 executionState, const VkDrawIndexedIndirectCommand* cmd)\n  {\n    draw(executionState, true, cmd-\u003eindexCount, cmd-\u003einstanceCount, cmd-\u003efirstIndex, cmd-\u003evertexOffset, cmd-\u003efirstInstance);\n  }\n}\n\nThe template isn\u0027t really necessary, getDrawCommand() could return a void*.\nAnyway, I just wanted to clarify. Maybe I\u0027m overthinking this. Again, your call.",
      "parentUuid": "2007c74a_b534a915",
      "range": {
        "startLine": 352,
        "startChar": 14,
        "endLine": 352,
        "endChar": 119
      },
      "revId": "8d384c136209941892ee78de0e95e639c2896732",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4405e585_291a7fa9",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 2
      },
      "lineNbr": 376,
      "author": {
        "id": 5050
      },
      "writtenOn": "2019-03-26T14:46:56Z",
      "side": 1,
      "message": "Could be DrawIndirect::drawIndexed(). Your call.",
      "range": {
        "startLine": 372,
        "startChar": 2,
        "endLine": 376,
        "endChar": 3
      },
      "revId": "8d384c136209941892ee78de0e95e639c2896732",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    }
  ]
}