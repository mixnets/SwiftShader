{
  "comments": [
    {
      "key": {
        "uuid": "ff764127_d0f9e10f",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 5065
      },
      "writtenOn": "2018-11-12T08:51:40Z",
      "side": 1,
      "message": "I suggest having a separate CommandState class/struct for this, otherwise CommandBuffer will have a tendency to grow without limits. It will also help when secondary command buffers are supported and need to inherit state.",
      "range": {
        "startLine": 23,
        "startChar": 19,
        "endLine": 23,
        "endChar": 47
      },
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0334b317_001342ad",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-11-12T16:16:56Z",
      "side": 1,
      "message": "Ack. I was already my intention to do this as a follow up.",
      "parentUuid": "ff764127_d0f9e10f",
      "range": {
        "startLine": 23,
        "startChar": 19,
        "endLine": 23,
        "endChar": 47
      },
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c267fdfa_3b5ee9f2",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 5005
      },
      "writtenOn": "2018-11-12T18:38:31Z",
      "side": 1,
      "message": "Please file a bug for it.",
      "parentUuid": "0334b317_001342ad",
      "range": {
        "startLine": 23,
        "startChar": 19,
        "endLine": 23,
        "endChar": 47
      },
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69f038ea_cb7d113f",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-11-12T20:46:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c267fdfa_3b5ee9f2",
      "range": {
        "startLine": 23,
        "startChar": 19,
        "endLine": 23,
        "endChar": 47
      },
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "67e92bea_e24f416b",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 32,
      "author": {
        "id": 5065
      },
      "writtenOn": "2018-11-12T08:51:40Z",
      "side": 1,
      "message": "This needs to be a copy, the pointer isn\u0027t valid after the initial allocation.",
      "range": {
        "startLine": 32,
        "startChar": 37,
        "endLine": 32,
        "endChar": 61
      },
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb37a418_b1f64c3f",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 32,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-11-12T16:16:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "67e92bea_e24f416b",
      "range": {
        "startLine": 32,
        "startChar": 37,
        "endLine": 32,
        "endChar": 61
      },
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3120156_d04603bf",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 103,
      "author": {
        "id": 5065
      },
      "writtenOn": "2018-11-12T08:51:40Z",
      "side": 1,
      "message": "ditto.",
      "range": {
        "startLine": 103,
        "startChar": 46,
        "endLine": 103,
        "endChar": 61
      },
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bff14fd1_ba0afa2d",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 103,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-11-12T16:16:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e3120156_d04603bf",
      "range": {
        "startLine": 103,
        "startChar": 46,
        "endLine": 103,
        "endChar": 61
      },
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "99622925_b05a1475",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 5065
      },
      "writtenOn": "2018-11-12T08:51:40Z",
      "side": 1,
      "message": "commands.clear(). The reservation staying around shouldn\u0027t be a problem since there is a TODO to use an allocator.",
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c9acc1d_fc03abc6",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-11-12T16:16:56Z",
      "side": 1,
      "message": "It doesn\u0027t really hurt to force clear it properly.",
      "parentUuid": "99622925_b05a1475",
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ec2e9b61_bb021d49",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 5005
      },
      "writtenOn": "2018-11-12T18:38:31Z",
      "side": 1,
      "message": "b/119409619 for follow-up. Not critical right now but it could hurt us in the longer term if this isn\u0027t done more efficiently. Note that deallocating a list of pointers is really bad for cache locality and the effects may be hard to detect during profiling (we\u0027d observe the cache misses later on but not where they originate from).\n\nAnyway, that said, this syntax looks really weird to me with \u0027commands\u0027 at the right hand side. Shouldn\u0027t commands.clear() work fine here and delete each element since they\u0027re unique_ptr\u0027s?",
      "parentUuid": "0c9acc1d_fc03abc6",
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fae28f40_cb5f8026",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-11-12T20:46:50Z",
      "side": 1,
      "message": "commands.clear() would cause a memory leak because it doesn\u0027t release the memory allocated by the vector (size becomes 0, but not capacity). Since this isn\u0027t a destructor, the memory allocated by the vector would never be released. Swapping with an empty vector forces the allocated memory to be released when the temporary object goes out of scope.",
      "parentUuid": "ec2e9b61_bb021d49",
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8969d868_6a2c3f0b",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 192,
      "author": {
        "id": 5065
      },
      "writtenOn": "2018-11-12T08:51:40Z",
      "side": 1,
      "message": "You\u0027ll also need to implement this.",
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5098a138_403851cd",
        "filename": "src/Vulkan/VkCommandBuffer.cpp",
        "patchSetId": 4
      },
      "lineNbr": 192,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-11-12T16:16:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8969d868_6a2c3f0b",
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1d5f580b_922c5e37",
        "filename": "src/Vulkan/VkCommandBuffer.hpp",
        "patchSetId": 4
      },
      "lineNbr": 129,
      "author": {
        "id": 5005
      },
      "writtenOn": "2018-11-12T18:38:31Z",
      "side": 1,
      "message": "FIXME(b/119409619)\n\nThis could use a custom allocator (i.e. vector\u003cT, Allocator\u003e), with the command pool acting as the allocator. However, I\u0027m not sure how to specify a specific pool instance. Can follow up in b/119409619.",
      "range": {
        "startLine": 129,
        "startChar": 4,
        "endLine": 129,
        "endChar": 9
      },
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b2c37e0_62b5863a",
        "filename": "src/Vulkan/VkCommandBuffer.hpp",
        "patchSetId": 4
      },
      "lineNbr": 129,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-11-12T20:46:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1d5f580b_922c5e37",
      "range": {
        "startLine": 129,
        "startChar": 4,
        "endLine": 129,
        "endChar": 9
      },
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65334b6b_211177f2",
        "filename": "src/Vulkan/VkCommandBuffer.hpp",
        "patchSetId": 4
      },
      "lineNbr": 130,
      "author": {
        "id": 5065
      },
      "writtenOn": "2018-11-12T08:51:40Z",
      "side": 1,
      "message": "unique_ptr\u003cCommand\u003e instead of Command*?",
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "45aa28d9_59e584f3",
        "filename": "src/Vulkan/VkCommandBuffer.hpp",
        "patchSetId": 4
      },
      "lineNbr": 130,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-11-12T16:16:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "65334b6b_211177f2",
      "revId": "f4fc50c2c555af38c3a62699904489a085554ba6",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    }
  ]
}