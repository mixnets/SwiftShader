{
  "comments": [
    {
      "key": {
        "uuid": "cfda28c9_3ea25425",
        "filename": "src/Device/Blitter.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1459,
      "author": {
        "id": 5050
      },
      "writtenOn": "2019-03-22T20:10:04Z",
      "side": 1,
      "message": "Oh, here it is:\nThe problem with having texture coordinates below 0.5 isn\u0027t OOB reads, as I first suspected, but it\u0027s getting errors because fx and fy will have negative values because (x0, y0) would be negative and (X0, Y0) would be 0. The fix still works properly, though, even though the root cause wasn\u0027t OOB reads.\n\nSo, in my example, if X \u003d\u003d Y \u003d\u003d 0.25, then x \u003d\u003d y \u003d\u003d -0.25, so fx \u003d\u003d fy \u003d\u003d -0.25 and ix \u003d\u003d iy \u003d\u003d 1.25.\nThe final equation be:\ncolor \u003d (c00 * 1.25 + c01 * -0.25) * 1.25 + (c10 * 1.25 + c11 * -0.25) * -0.25;\n      \u003d c00 * 1.5625 + c01 * -0.3125 + c10 * -0.3125 + c11 * 0.0625;\n\nSo instead of the c00 counting for 100% of the value, all 4 pixels have an influence on the final color value, which then can be wrong.",
      "range": {
        "startLine": 1457,
        "startChar": 0,
        "endLine": 1459,
        "endChar": 42
      },
      "revId": "1af00d1e0242174dfc0cd51e7eb550d2057419a8",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83d12ed9_953a356b",
        "filename": "src/Device/Blitter.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1546,
      "author": {
        "id": 5005
      },
      "writtenOn": "2019-03-22T14:04:17Z",
      "side": 1,
      "message": "I\u0027d rather keep this after getEntry(), to avoid using highly fluctual parameters as state and also be able to easily refactor this into one method to generate/fetch the routine and one to invoke it (e.g. to consolidate some of the clear() functionality).",
      "range": {
        "startLine": 1546,
        "startChar": 2,
        "endLine": 1546,
        "endChar": 16
      },
      "revId": "1af00d1e0242174dfc0cd51e7eb550d2057419a8",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88c147ac_794c496a",
        "filename": "src/Device/Blitter.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1546,
      "author": {
        "id": 5050
      },
      "writtenOn": "2019-03-22T14:26:31Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "83d12ed9_953a356b",
      "range": {
        "startLine": 1546,
        "startChar": 2,
        "endLine": 1546,
        "endChar": 16
      },
      "revId": "1af00d1e0242174dfc0cd51e7eb550d2057419a8",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "84b62c72_7b7dc191",
        "filename": "src/Device/Blitter.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1557,
      "author": {
        "id": 5005
      },
      "writtenOn": "2019-03-22T14:04:17Z",
      "side": 1,
      "message": "I think we should simply always do this for Pastel 1.0, and optimize it later. There are some issues with error accumulation that may not be accounted for yet. And we\u0027re not optimizing for same-size region yet either. Let\u0027s make that a more coordinated effort after 1.0.",
      "range": {
        "startLine": 1557,
        "startChar": 8,
        "endLine": 1557,
        "endChar": 19
      },
      "revId": "1af00d1e0242174dfc0cd51e7eb550d2057419a8",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02447c23_a48f3c78",
        "filename": "src/Device/Blitter.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1557,
      "author": {
        "id": 5050
      },
      "writtenOn": "2019-03-22T14:26:31Z",
      "side": 1,
      "message": "I can do this, but I\u0027m not too worried about error accumulation, since we\u0027re always within the bounds of the image, not right on the edge, because we use pixel centers. The only issue was that, when filtering is on, we subtract 0.5 to both coordinates, so if the origin is below (0.5, 0.5), we\u0027re reading memory out of bounds.",
      "parentUuid": "84b62c72_7b7dc191",
      "range": {
        "startLine": 1557,
        "startChar": 8,
        "endLine": 1557,
        "endChar": 19
      },
      "revId": "1af00d1e0242174dfc0cd51e7eb550d2057419a8",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3c7abda_e2c65d79",
        "filename": "src/Device/Blitter.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1557,
      "author": {
        "id": 5005
      },
      "writtenOn": "2019-03-22T15:21:52Z",
      "side": 1,
      "message": "Doesn\u0027t line 1431 prevent that? Or is it X1/Y1 that is underflowing? How about overflow of X0/Y0 then?",
      "parentUuid": "02447c23_a48f3c78",
      "range": {
        "startLine": 1557,
        "startChar": 8,
        "endLine": 1557,
        "endChar": 19
      },
      "revId": "1af00d1e0242174dfc0cd51e7eb550d2057419a8",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4059c57d_2afd6457",
        "filename": "src/Device/Blitter.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1557,
      "author": {
        "id": 5050
      },
      "writtenOn": "2019-03-22T15:47:35Z",
      "side": 1,
      "message": "In the case I was investigating, offsets were all 0 and w and h were 0.5 (so upscaling by 2X with filtering on). x0 and y0 were both at 0.25. I\u0027ll need to re-check where the issue actually is.",
      "parentUuid": "f3c7abda_e2c65d79",
      "range": {
        "startLine": 1557,
        "startChar": 8,
        "endLine": 1557,
        "endChar": 19
      },
      "revId": "1af00d1e0242174dfc0cd51e7eb550d2057419a8",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4",
      "unresolved": true
    }
  ]
}