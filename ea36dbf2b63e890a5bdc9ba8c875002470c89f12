{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "22da47ec_cb3caafe",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 5005
      },
      "writtenOn": "2022-10-11T19:47:03Z",
      "side": 1,
      "message": "Vertex not affected?",
      "range": {
        "startLine": 7,
        "startChar": 26,
        "endLine": 7,
        "endChar": 31
      },
      "revId": "ea36dbf2b63e890a5bdc9ba8c875002470c89f12",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c1dc9018_7f8dadcd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 5050
      },
      "writtenOn": "2022-10-11T20:31:31Z",
      "side": 1,
      "message": "@syoussefi: could your test also reproduce this issue with a vertex shader?",
      "parentUuid": "22da47ec_cb3caafe",
      "range": {
        "startLine": 7,
        "startChar": 26,
        "endLine": 7,
        "endChar": 31
      },
      "revId": "ea36dbf2b63e890a5bdc9ba8c875002470c89f12",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77ffde22_c316d4eb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 5050
      },
      "writtenOn": "2022-10-11T22:37:21Z",
      "side": 1,
      "message": "I\u0027m starting to wonder if the issue actually isn\u0027t SpirvShader::getIdentifier() instead. Looking at:\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/swiftshader/src/Pipeline/SpirvShader.hpp;l\u003d645\nIt looks like the unique identifier ignores `renderPass`, `subpassIndex` and `robustBufferAccess`, which could all alter the shader\u0027s execution.",
      "parentUuid": "c1dc9018_7f8dadcd",
      "range": {
        "startLine": 7,
        "startChar": 26,
        "endLine": 7,
        "endChar": 31
      },
      "revId": "ea36dbf2b63e890a5bdc9ba8c875002470c89f12",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4d2e02f_7a3c6574",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 5005
      },
      "writtenOn": "2022-10-12T00:32:46Z",
      "side": 1,
      "message": "While those states indeed currently affect the code emitted by `SpirvShader`, `getIdentifier()` is not the best way to take them into account. For starters as part of b/247020580 I\u0027ll make `SpirvShader` only handles parsing, not emission of the SPIR-V code.\n\nI think we\u0027re simply missing robustness as state for both the vertex and pixel routines. It used to be per-device invariant so the per-device routine caches didn\u0027t need to track it.",
      "parentUuid": "77ffde22_c316d4eb",
      "range": {
        "startLine": 7,
        "startChar": 26,
        "endLine": 7,
        "endChar": 31
      },
      "revId": "ea36dbf2b63e890a5bdc9ba8c875002470c89f12",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5623269f_d9a310cc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 5845
      },
      "writtenOn": "2022-10-12T12:09:25Z",
      "side": 1,
      "message": "Ok, but then, since we still wouldn\u0027t be taking `renderPass` and `subpassIndex` into account as part of the cache key, how will we avoid future incorrect cache hits like this one?",
      "parentUuid": "e4d2e02f_7a3c6574",
      "range": {
        "startLine": 7,
        "startChar": 26,
        "endLine": 7,
        "endChar": 31
      },
      "revId": "ea36dbf2b63e890a5bdc9ba8c875002470c89f12",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3dd793b2_284a6116",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 46365
      },
      "writtenOn": "2022-10-12T13:45:12Z",
      "side": 1,
      "message": "\u003e Vertex not affected?\n\nAlso Compute by the way. I\u0027ll make sure to cover all three, will let you know when I have tests",
      "parentUuid": "5623269f_d9a310cc",
      "range": {
        "startLine": 7,
        "startChar": 26,
        "endLine": 7,
        "endChar": 31
      },
      "revId": "ea36dbf2b63e890a5bdc9ba8c875002470c89f12",
      "serverId": "aea13c4a-0b89-3eca-aee9-e193b1b77aa4"
    }
  ]
}